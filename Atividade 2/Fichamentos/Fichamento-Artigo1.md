# Modular Monolith: Is This the Trend in Software Architecture?

## Referência
Su, Ruoyu; Li, Xiaozhou. "Modular Monolith: Is This the Trend in Software Architecture?," in *arXiv preprint*, arXiv:2401.11867, January 2024. [PDF](https://arxiv.org/pdf/2401.11867)

## 1. Fichamento de Conteúdo

O artigo apresenta uma análise aprofundada sobre a arquitetura de monólito modular, posicionando-a como uma tendência emergente e um meio-termo estratégico entre as arquiteturas monolítica tradicional e de microsserviços. A investigação foi motivada pelo crescente interesse no tema, evidenciado pelo aumento drástico de publicações em 2023, e impulsionada pela introdução do framework "Service Weaver" pelo Google, que promete o melhor dos dois mundos: a velocidade de desenvolvimento de um monólito com a escalabilidade e resiliência dos microsserviços. O objetivo do estudo é, portanto, consolidar a definição de monólito modular na indústria, além de investigar os frameworks disponíveis para sua construção e os casos de empresas que a adotaram. Para isso, foi conduzida uma revisão sistemática da literatura cinzenta que resultou na análise de 64 fontes relevantes. Os resultados mostram que o monólito modular organiza o sistema em módulos com baixo acoplamento e alta coesão, com limites bem definidos e dependências explícitas, mas que são implantados como uma única unidade. Essa abordagem se destaca por ser uma alternativa para evitar a complexidade de custo e manutenção dos microsserviços, ao mesmo tempo que pode servir como um passo intermediário para uma futura migração para eles. O estudo identificou três frameworks principais (Service Weaver, Spring Modulith e Light-hybrid-4j) e quatro casos notáveis (Shopify, Appsmith, Gusto e PlayTech) que optaram por essa arquitetura para obter limites claros entre componentes sem incorrer no overhead da decomposição em microsserviços.

## 2. Fichamento Bibliográfico

* **Monólito Modular: Conceito e Vantagens**: É um padrão de arquitetura de software que combina a simplicidade de uma estrutura monolítica com os benefícios da modularização encontrados nos microsserviços. A aplicação é organizada em módulos com baixo acoplamento, onde cada um possui limites bem definidos e dependências explícitas em relação aos outros. Embora os módulos possam ser desenvolvidos e testados de forma independente, eles são implantados coletivamente como uma única unidade. Uma de suas principais vantagens é a flexibilidade, pois um módulo bem definido pode ser extraído e implantado como um microsserviço posteriormente, se necessário, tornando a migração mais conveniente do que partir de um monólito tradicional.

* **Características e Estrutura de Código**: As principais características de um monólito modular são: (1) **Segregação de módulos**, onde cada um é independente com suas próprias camadas de domínio, infraestrutura e API; (2) **Modularidade com baixo acoplamento e alta coesão**, com comunicação entre módulos ocorrendo via APIs; (3) **Esquema de banco de dados unificado**, em contraste com os microsserviços, onde cada serviço tem seu próprio esquema; (4) **Estrutura de implantação monolítica**, com todos os módulos operando dentro do mesmo processo ou máquina virtual; (5) **Processo de aplicação unificado**, sem uma delimitação rígida de propriedade de dados entre os módulos; (6) **Manutenibilidade e escalabilidade aprimoradas** em comparação com monólitos tradicionais. A estrutura do código deve conter múltiplos módulos que expõem suas funcionalidades através de interfaces públicas, seja externamente (via APIs REST ou gRPC) ou internamente (através de uma interface abstraída), para preservar a separação de responsabilidades.

* **Estratégia de Testes e Manutenção**: A abordagem de testes se assemelha à dos microsserviços. Como o sistema é dividido em módulos, cada módulo deve ter seu próprio conjunto de testes unitários para garantir que sua funcionalidade opere como esperado de forma isolada. Além disso, a interação entre os módulos deve ser verificada por meio de testes de integração. O artigo também destaca a necessidade de os desenvolvedores revisarem e refatorarem o monólito modular regularmente para manter a base de código limpa, sustentável e adaptável às mudanças nos requisitos de negócio.

* **Framework: Service Weaver**: É um framework de código aberto do Google, atualmente disponível apenas em Go, projetado para desacoplar o código de como ele é implantado. Ele permite que os desenvolvedores escrevam a aplicação como um monólito modular em um único binário, usando chamadas de método nativas, e depois a configurem para ser implantada como um conjunto de microsserviços. A motivação por trás de sua criação foi a constatação do Google de que a sobrecarga de manter múltiplos binários de microsserviços, com arquivos de configuração e formatos de serialização de dados separados, retardava significativamente o desenvolvimento. O framework oferece recursos como comunicação de alto desempenho, configuração mínima, observabilidade integrada (logs, métricas e traces) e escalabilidade flexível.

* **Casos de Uso na Indústria**: O artigo detalha quatro empresas que adotaram o monólito modular como uma alternativa aos microsserviços. **Shopify** escolheu essa arquitetura para gerenciar sua enorme base de código em Ruby on Rails, buscando um equilíbrio entre os benefícios de um codebase único e a necessidade de limites claros entre os componentes. **Appsmith**, cujo modelo de negócio depende de implantações locais (on-premise), rejeitou os microsserviços para não introduzir complexidade no processo de implantação para seus clientes finais. O time de **Gusto** usou a abordagem para desenvolver uma nova funcionalidade, pois era crucial ter uma fronteira de API clara, e um erro nessa fronteira seria muito mais caro de corrigir em uma arquitetura de microsserviços. Por fim, a equipe de backend do cassino da **PlayTech** optou pelo monólito modular para evitar o que consideraram uma "sobrecarga desnecessária" na manutenção de microsserviços do ponto de vista de uma única equipe.

## 3. Fichamento de Citações

* _"Google explains that it is a framework that has the best of both worlds: the development velocity of a monolith, with the scalability, security, and fault-tolerance of microservices"_.
* _"The results show that Modular Monolith is a software architecture pattern that combines the advantages of monolith with microservices architecture". "In this architecture, systems are organized into loosely coupled modules, each delineating well-defined boundaries and explicit dependencies on other modules"_.
* _"Especially, it differs from the previously mentioned modularity in that it can be moved or deployed as microservices later if want"_.
* _"The motivation for building Service Weaver is Google found that the expense of maintaining multiple different microservice binaries with separate configuration files, network endpoints, and serializable data formats significantly slowed down the development of microservice-based applications"_.
* _"Shopify originally considered microservices but finally chose modular monolith to balance the benefits of a single codebase with clear component boundaries"_.
* _"Given their core on-premise deployment as a focal point of their business, they deemed it imperative to avoid introducing complexity into the deployment process for end users"_.
